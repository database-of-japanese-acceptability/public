# AMPS: Another MSFA Processing System

2008年頃に開発が進められていたAMPSシステムをDockerの仮想環境の下で再現したものです。下記の手順でシステムをインストールして実行・停止できます。もともと開発途上のシステムであること、また当時の開発環境を完全に再現することが難しいことから、様々な制約はありますが、ウェブシステムとしての主な機能を確認することができます。

### 動作環境

下記の環境で動作確認しています。

* MacOS Sierra (10.12.2）
* Docker Stable Channel 1.13.0 (15072) 

その他、ソースコードを取得するためにGitがインストールされている必要があります。

### Docker for Mac をインストールして起動

下記のURLからDocker for Mac (Stable Channel)をインストールし、起動してください。

https://docs.docker.com/docker-for-mac/

### ソースコードを取得

下記のコマンドで適当なところにソースコードを配置してください。

```
$ git pull https://github.com/New-AMPS/amps
```

### イメージをビルド

Dockerのイメージをダウンロードおよびビルドします。

```
# scriptディレクトリに移動してから
$ cd amps/scripts
# installスクリプトを実行する。
$ ./install 
```

### システムの起動

下記のコマンドを実行して下さい（デフォルトのブラウザが立ち上がります）。

```
# scriptディレクトリのstartスクリプトを実行する。
$ ./start
```
システムが起動完了するまで数秒から数十秒かかります。ブラウザが立ち上がらない場合は下記のURLにアクセスしてください。

localhost:4001

### システムの停止

システムを停止する際には、必ずシステムを起動したターミナル上で `Control-C` を打鍵してください。。

### データの追加・削除などについて

データの追加・削除は画面右上の`[Login]`から可能です（`Username`と`Password`は共に`test`）。XML形式のデータファイルを1つずつ追加したり削除したりすることができます。ただし、システムが求める仕様に合致していないデータを登録すると、思わぬエラーが生じる可能性があります。本システムには十分なエラーチェック機構が実装されていません。


また、コマンドライン上でDBの全削除やデータ一括入力を行うスクリプトが存在しますが、依存ライブラリの相性問題で現在使用できません。かつて稼働していたときの状況を可能な限りで再現したものとお考え下さい。

